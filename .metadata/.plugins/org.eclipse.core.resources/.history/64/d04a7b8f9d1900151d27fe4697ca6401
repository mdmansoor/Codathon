package com.flopper.framework.calender;

import java.io.IOException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import com.flopper.framework.constant.Contsants;
import com.google.api.client.util.DateTime;
import com.google.api.services.calendar.Calendar;
import com.google.api.services.calendar.model.Event;
import com.google.api.services.calendar.model.EventAttendee;
import com.google.api.services.calendar.model.EventDateTime;

public class CalenderEventTest {

	public static void main(String[] args) throws IOException {

		String date = "24/06/2015";
		String hour = "9";
		String minute = "00";
		// TODO Auto-generated method stub
		Event event = new Event();
		Calendar service = null;
		Date startDate, endDate;

		event.setSummary("Floppers  ");
		event.setLocation("IND");
		event.setDescription("Your Appointment with Executive is Schedulae @"
				+ hour + ":" + minute);

		ArrayList<EventAttendee> attendees = new ArrayList<EventAttendee>();
		// attendees.add(new EventAttendee().setEmail("basha54@gmail.com"));
		attendees.add(new EventAttendee().setEmail("mdmansoor16@gmail.com"));
		// ...
		event.setAttendees(attendees);

		final SimpleDateFormat dateFormat = new SimpleDateFormat(
				Contsants.DATE_FORMAT);
		try {
			startDate = dateFormat.parse(date);
			endDate = startDate;
			startDate.setHours(12);
			startDate.setMinutes(00);

			endDate.setHours(13);
			endDate.setMinutes(00);

			DateTime start = new DateTime(startDate);
			event.setStart(new EventDateTime().setDateTime(start));
			DateTime end = new DateTime(endDate);
			event.setEnd(new EventDateTime().setDateTime(end));

			service = GoogleApiCalenderCredential.getInstance().getCalendar();
			Event createdEvent = service.events().insert("primary", event)
					.setSendNotifications(true).execute();
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		// Event createdEvent = service.events().insert("primary",
		// event).setSendNotifications(true).execute();

		// System.out.println("Data is :"+createdEvent.getId());
	}
}